---
title: REST웹의 아키텍처 스타일
toc: true
toc_sticky: true
categories:
  - web

date: 2022-03-03
---
## 아키텍처 스타일의 중요성

REST는 웹의 아키텍처 스타일이다.
아키텍처 스타일은 아키텍처 패턴이라고도 하며, 복수의 아키텍처의 공통된 성질, 양식 등을 가리키는 말이다.
아키텍처 스타일에는 MVC와 파이프 앤 필터, 이벤트 시스템 등이 있다.

디자인 패턴은 마이크로 아키텍처 패턴이라고도 칭하며, 아키텍처 스타일보다 입도가 작은 클래스 등의 설게양식을 가리킨다.
디자인과 디자인 패턴이 다르듯, 아키텍처와 아키텍처 스타일은 별개다.

실제 시스템은 구체적인 아키텍처를 가지고 있고, 아키텍처를 설계할 때 마구잡이로 만드는 것이 아닌 아키텍처 스타일을 적용한다.
시스템의 아키텍처를 결정할 때 나침반이 되는 것이 아키텍처 스타일이다.

<br/>

## 아키텍처 스타일로서의 REST

REST는 네트워크 시스템의 아키텍처 스타일이다.
네트워크 시스템의 아키텍처 스타일로서 가장 유명한 것은 `클라이언트/서버`다.
웹도 `클라이언트/서버`다.

웹의 아키텍처 스타일은 REST이기도 하지만, 클라이언트/서버이기도 하다. 이게 무슨 말인가?
사실은 REST는 클라이언트 서버 구조에서 파생된 아키텍처 스타일이다.
순수한 클라이언트/서버 아키텍처 스타일에 몇 가지 제약을 더해가면, REST라는 아키텍처 스타일이 된다.

제약은 아키텍터 스타일에 있어서 중요한 개념이다.
일반적으로 소프트웨어 아키텍처는 복수의 컴포넌트를 조합해 구현하는데, 각각의 컴포넌트가 따로 움직여서는 동작하지 않고, 각 컴포넌트에 제약을 부과해 간다. 그 결과, 각 컴포넌트가 협력하면서 동작하게 된다.

아키텍처 스타일은 특정 구현이나 아키텍처가 아니다.
웹의 아키텍처와 구현은 REST 아키텍처 스타일을 따르고 있지만, 웹 이외의 아키텍처와 구현도 생각해 볼 수 있다.
구현에서 추상도를 한 단계 올린 것이 아키텍처 스타일이다.
아키텍처에서 추상도를 한 단계 더 올린 것이 아키텍처 스타일이다.

<br/>

## 리소스

REST에 있어서 중요한 개념의 하나로 리소스가 있다.
REST의 해설에 앞서 리소스에 대해 설명을 하면, 일기예보, 사진, 논문 등 모두 리소스다.
웹상에는 이 밖에도 다양한 리소스가 존재한다.
리소스를 한마디로 설명하면, 웹상에 존재하는 이름을 가진 모든 정보가 된다.
사물의 이름, 명사에는 그 자신과 다른 대상을 구별하여 가리키는 역할이 있다.
리소스의 이름은 어떤 리소스를 다른 리소스와 구별하기 위한 것으로 중복이 되서는 안된다.

- 리소스의 이름이란 URI를 말한다.

```markdown
http://mentorbooks.dothome.co.kr/IT/4864
```

리소스란 웹상의 정보이고, 전 세계의 리소스는 각각 URI로 의미 있는 이름을 가진다.
URI를 이용함으로써, 프로그램은 리소스가 표현하는 정보에 접근할 수 있다.

- 리소스의 어드레스 가능성

웹 URI 발명 이전에는 큰 파일을 어딘가의 서버에 저장해 두고 그 장소를 메일로 알려 줄 경우, 내용으로 쓸 수 밖에 없었다.

![image](https://user-images.githubusercontent.com/67885363/156796359-b87d6a5c-8279-45ba-93db-f28e146f464f.png)

URI가 있는 현재는 특정 파일에 접근하는 방법을 일일히 설명할 필요가 없다.
단순히 `ftp://example.com/public/data/sample_file.gz`라는 URI를 적어 액세스 하도록 하면 충분하다.

- 프로그램으로 해석해서 파일을 다운로드 하는 것은 아주 어려운 작업
  - 메일에서 FTP 서버와 로그인 정보, 서버 내의 디렉터리 구조를 추출하지 않으면 안 되기 때문
- URI는 구조를 가지고 있기 때문에 프로그램에서 간단하게 처리할 수 있다.
- URI가 지니고 있는 리소스를 간단히 가리킬 수 있는 성질을 가리켜 어드레스 가능성이라고 부른다.
  - 리소스를 어드레스 가능한 상태, 즉 제대로 이름이 붙어 있고 적절한 수단으로 접근할 수 있는 상태로 만들어야된다.



- 복수의 URI를 가진 리소스

1개의 리소스는 복수의 URI를 가질 수 있다.

```markdown
http://weather.example.com/seoul/today
http://weather.example.com/seoul/2011-01-01
```

2011년 1월 1일 시점에선 이 2개의 URI는 같은 리소스를 가리키지만, 각 URI의 의미는 다르다.
하나의 리소스에 URI를 여러 개 붙여 두면, 클라이언트가 리소스에 접근하기 쉬워진다.
그 반면, 어느 것이 정식 URI인지 알기 힘들게 되는 결점도 생긴다.

- 리소스의 표현과 상태

리소스는 웹상에 존재하는 정보라는 추상적인 개념이다.
서버와 클라이언트 간에 실제로 리소스를 주고 받을 때는 어떤 구체적인 데이터를 서로 송신한다.
서버와 클라이언트 사이에 주고받는 데이터를 `Resource Representation`이라고 부른다.
하나의 리소스는 복수의 표현을 가질 수 있다. ex) 일기예보 HTML, PDF, TEXT 등
복수 리소스에 개별 URI를 부여해도 되고, HTTP 구조를 이용해 하나의 URI로 복수 표현을 반환할 수 있다.
리소스는 상태라는 것이 있는데, 리소스의 상태가 변하면 그 표현도 변한다. ex) 일기예보 맑음 -> 흐림

<br/>

## 스타일을 조합혀여 REST를 구성한다.

REST는 복수의 아키텍처 스타일을 조합해 구축한 복합 아키텍처 스타일이다.
클라이언트/서버 아키텍처 스타일부터 다른 제약을 부과하면서, REST를 구축해 나가보자.

### 클라이언트/서버

웹은 HTTP라는 프로토콜을 이용해 클라이언트와 서버가 서로 통신하는 클라이언트/아키텍처 스타일을 채용하고 있다.
클라이언트가 서버에 요청을 보내면, 서버는 클라이언트에 대해 응답을 돌려준다.
장점으로는 단일 컴퓨터 상에서 모든 것을 처리하는 것이 아니라, 클라이언트와 서버로 분리해서 처리할 수 있다는 것이다.
유저 인터페이스는 클라이언트에서 담당하기 때문에 서버는 데이터 스토리지로서의 기능만 제공하면 되고, 유저 인터페이스는 휴대전화 pc등 멀티 플랫폼으로 구성할 수 있다.

### 스테이트리스 서버

클라이언트/서버에 최초로 추가한 아키텍처 스타일은 스테이트리스 서버다.
스테이트리스란, 클라이언트의 애플리케이션 상태를 서버에서 관리하지 않는다는 것을 의미한다.
서버가 애플리케이션 상태를 가지지 않게 되면, 서버 측의 구현을 간략화 할 수 있다는 장점이 있다.
클라이언트로부터 요청에 응답한 뒤 바로 서버의 자원을 해제할 수 있다.
스테이트리스가 아닌 웹 서비스, 웹 API 중에 대표적인 것은 Cookie를 사용한 세션 관리다.
REST 기준으로 Cookie를 사용한 세션 관리는 잘못된 확장이지만, Cookie를 사용한 폼 인증을 그만둘 수도 없다.
Cookie는 스테이트리스 서버의 이점을 버린다는 것을 알고 이용해야 한다.

### 캐시

캐시란, 리소스의 신선도에 기초해, 한번 가져온 리소스를 클라이언트 쪽에서 돌려쓰는 방식이다.
캐시의 장점은 서버와 클라이언트 사이의 통신량을 줄여 네트워크 대역의 이용과 처리시간을 축소하고,  효율적으로 처리할 수 있다.
하지만, 오래된 캐시를 이용해 정보의 신뢰성이 떨어질 가능성도 있다.

### 유니폼 인터페이스

유니폼 인터페이스는 URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍처 스타일을 말한다.
HTTP 1.1에서는 GET과 POST 등 8개의 메서드만 정의되어 있는데 메서드가 8개로 고정되어 확장할 수 없는 것은 인터페이스의 유연성에 제약을 가함으로써 전체적인 아키텍처가 간결해진다.
또한 인터페이스를 통일하면서 클라이언트와 서버 구현의 중립성이 향상된다.
유니폼 인터페이스는 REST를 가장 특징짓는 아키텍처 스타일이다.

### 계층화 시스템

유니폼 인터페이스의 이점 중, 시스템 전체를 계층화하기 쉽다는 점을 들 수 있다.
예를 들어, 웹 서비스에서는 서버와 클라이언트 간의 로드 밸런서를 설치해 부하를 분산시키거나, 프록시를 설치해 엑세스를 제어한다.
서버나 프록시 모두 동일한 인터페이스로 접속할 수 있기 때문에, 접속할 곳이 서버에서 프록시로 바뀐 것을 신경 쓸 필요가 없다.
이것은 서버와 프록시 등 각 컴포넌트 간의 인터페이스를 HTTP로 통일하고 있기에 실현될 수 있었다.
또한 HTTP 인터페이스를 구현하지 않는 시스템에서도 웹 어플리케이션 서버를 끼워 넣어 HTTP의 인터페이스를 가지게 함으로써, 브라우저 등의 클라이언트와 접속할 수 있게 되었다.
이와 같이 시스템을 몇 개의 계층으로 분리하는 아키텍처 스타일을 계층화 시스템이라고 한다.

### 코드 온 디맨드

코드 온 디맨드는 프로그램 코드를 서버에서 다운받아 클라이언트에서 실행하는 아키텍처 스타일이다.
코드 온 디맨드의 장점은 클라이언트를 차후에 확장할 수 있다는 것이다. 미리 준비해 둔 기능뿐만 아니라, 새로운 기능을 계속 추가할 수 있다.
하지만 네트워크 통시에서의 프로토콜 가시성이 저하된다.
HTTP라는 애플리케이션 프로토콜에 따라 통신하고 있는 동안은 통신의 의미와 접근할 리소스가 병백하다. 
그러나 코드 온 디맨드로 프로그램을 다운로드해 클라이언트에서 실행해 버리면 애플리케이션 프로토콜 가시성은 저하된다.

### REST = ULCODC$SS

이 아키텍처 스타일에 필딩은 REST라고 이름 붙였다.
REST란 다시 말해, 유니폼/계층화/코드 온 디맨드/ 클라이언트/캐시/스테이트리스 서버 6가지를 조합한 아키텍처 스타일을 가리키는 것이다.
REST는 아키텍처 스타일이므로 실제로 시스템을 설계할 때는 그 시스템의 아키텍처를 만들어야 한다.
다만, REST 스타일 중 몇가지를 제외하더라도 상관없다.
이상을 염두에 두면서 실제로 동작하고 가치를 제공할 수 있는 시스템을 만드는 것이 중요하다.
그리고 REST 스타일을 제외해야하는 경우네는 다른 아키텍처 스타일을 사용하면 된다. ex) P2P

<br/>

## REST의 2가지 측면

### REST와 하이퍼미디어

우리는 웹을 사용할 때, 링크를 따라가면서 다양한 리소스에 접근한다.
하이퍼 미디어의 기본 기능인 링크를 따라가는 작업을 몇 번 거치면서 전체적으로 소셜 북마크라는 하나의 애플리케이션이 실현된다.
웹이 가진 이 특징을 REST에서는 애플리케이션 상태 엔진으로서의 하이퍼미디어라고 한다.
애플리케이션 상태는 하이퍼미디어의 링크를 따라가는 작업에 의해 변화한다.
하이퍼미디어를 이용한 애플리케이션에서는 리소스의 URI만 알면 어떤 애플리케이션이 제공하고 있는 리소스를 다른 애플리케이션에서도 간단히 재사용할 수 있다는 장점이 있다.
리소스를 링크로 연결해 하나의 애플리케이션을 구성한다는 개념은 REST의 근간을 이루는 사상이다.
이 개념은 접속성이라고 불린다.

### REST와 분산시스템

RPC와 CORBA, DCOM 등의 분산 오브젝트에서는 함수나 메서드 단위로 서버 쪽의 처리를 호출한다.
네트워크를 통한 함수 호출은 동일 프로세스 내의 함수 호출과는 비교되지 않을 만큼 오버헤드가 심하기 때문에 시스템 전체 성능의 저하를 가져온다.
인터페이스의 입도를 크게 해 오버헤드를 줄일 수 있지만, RPC와 분산 오브젝트는 서버마다 다른 인터페이스를 가지며, 개별 인터페이스는 프로그램 라이브러리의 인터페이스를 기반으로 개발하는 겨우가 많기 때문에 구현하기 쉽지 않다.
일반적으로 라이브러리에 좋다는 API는 네트워크로 호출하기에 지나치게 작은 입도다.
그에 비해 REST에 기초한 웹 서비스에서는 링크를 이용해 애플리케이션을 실행한다.
리소스는 의미를 가진 하나의 데이터로 RPC 함수에 의해 주고받는 데이터보다 입도가 크다.
그러므로 링크를 따라 애플리케이션의 상태를 변화시키는 편이 전체적인 성능 저하를 억제할 수 있다.
또한 RPC와 분산 시스템에서는 기능을 추가할 때마다 메서드의 인수와 반환값이 바뀌어 API 호환성이 상실되기 때문에 기존의 클라이언트를 모두 동시에 변경해야 된다. (웹과 같은 대규모 시스템에서 비현실적)
그에 반해, REST에 기초한 웹에서는 유니폼 인터페이스에 의해 인터페이스가 고정되어 있어 호환성 문제는 발생하지 않는다.
HTTP 메서드는 항상 고정되어 있어, HTTP를 구현한 클라이언트라면 동일하게 접속할 수 있다.
그리고 HTTP에서는 인터페이스의 하위 호환성을 보증하고 있다.

<br/>

## REST의 의미

REST는 웹 전체의 아키텍처 스타일이다. 웹은 REST라는 분산 네트워크 시스템을 위한 이론이 있었기에 이만큼 성공할 수 있었다.
우리들이 만드는 웹 서비스나 웹 API는 웹을 구성하는 일부분으로, 개별 웹 서비스와 웹 API가 RESTful이 되면, 웹은 전체적으로 좋아진다.